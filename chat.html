<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="mobile-web-app-capable" content="yes">
    <title>智能聊天助手</title>
    <link rel="stylesheet" href="css/chat.css">
    <!-- 使用国内CDN镜像加载图标库 -->
    <link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/remixicon/3.5.0/remixicon.css">
    <!-- 添加FastClick库解决移动端点击延迟问题 -->
    <script src="https://cdn.bootcdn.net/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
    <script>
        // 初始化FastClick
        if ('addEventListener' in document) {
            document.addEventListener('DOMContentLoaded', function() {
                FastClick.attach(document.body);
            }, false);
        }
    </script>
</head>
<body>
    <div id="nav-bar">
        <div id="nav-title">AI记账助手</div>
        <div class="nav-actions">
            <button id="clear-chat-btn" class="nav-action-btn" title="清空聊天记录">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M3 6h18"></path>
                    <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                </svg>
            </button>
        </div>
    </div>
    
    <div id="chat-container">
        <div id="chat-window">
            <!-- 空聊天提示 -->
            <div id="empty-chat" class="empty-chat">
                <div class="empty-chat-icon">
                    <i class="ri-message-3-line"></i>
                </div>
                <div class="empty-chat-title">开始新的对话</div>
                <div class="empty-chat-subtitle">发送消息开始与AI助手交流，AI会根据您的问题提供帮助。</div>
            </div>
        </div>
        <div id="input-area" tabindex="-1">
            <div class="input-actions">
                <button class="action-btn" title="表情" type="button">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zm-5-7h10v2H7v-2zm2-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm6 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z" fill="currentColor"/>
                    </svg>
                </button>
                <button class="action-btn" title="附件" type="button">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M14 13.5V8a2 2 0 1 0-4 0v5.5a3.5 3.5 0 0 0 7 0V8a5 5 0 0 0-10 0v5.5a6.5 6.5 0 0 0 13 0V8h-2v5.5a4.5 4.5 0 1 1-9 0V8a3 3 0 1 1 6 0v5.5a1.5 1.5 0 1 1-3 0V8h-2v5.5a3.5 3.5 0 0 0 7 0" fill="currentColor"/>
                    </svg>
                </button>
            </div>
            <input type="text" id="message-input" placeholder="输入消息..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" enterkeyhint="send">
            <button id="send-btn" type="button">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M3 20V4L22 12L3 20ZM5 17L16.85 12L5 7V10.5L11 12L5 13.5V17Z" fill="currentColor"/>
                </svg>
            </button>
        </div>
    </div>
    
    <!-- 底部导航栏 -->
    <div id="bottom-nav">
        <a href="bill.html" class="nav-item">
            <i class="ri-bill-line"></i>
            <span>账单管理</span>
        </a>
        <a href="chat.html" class="nav-item active">
            <i class="ri-robot-fill"></i>
            <span>AI记账</span>
        </a>
        <a href="data.html" class="nav-item">
            <i class="ri-pie-chart-line"></i>
            <span>数据分析</span>
        </a>
    </div>
    
    <!-- 确认对话框模板 -->
    <template id="confirm-dialog-template">
        <div class="confirm-dialog">
            <div class="confirm-dialog-content">
                <div class="confirm-dialog-title">确认操作</div>
                <div class="confirm-dialog-message">确定要清空所有聊天记录吗？此操作无法撤销。</div>
                <div class="confirm-dialog-buttons">
                    <button class="confirm-dialog-button confirm-dialog-cancel">取消</button>
                    <button class="confirm-dialog-button confirm-dialog-confirm">确定</button>
                </div>
            </div>
        </div>
    </template>
    
    <!-- 使用defer加载脚本，确保DOM加载完成后执行 -->
    <script type="module" src="js/chat.js" defer></script>
</body>
</html>
