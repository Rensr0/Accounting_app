<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <title>数据分析</title>
    <link rel="stylesheet" href="css/data.css">
    <link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/remixicon/3.5.0/remixicon.css">
</head>
<body>
    <div id="app-container">
        <div id="nav-bar">
            <button id="back-btn" onclick="window.location.href='index.html'">
                <i class="ri-arrow-left-line"></i>
            </button>
            <span id="nav-title">财务分析</span>
            <button id="filter-btn">
                <i class="ri-filter-3-line"></i>
            </button>
        </div>

        <div class="dashboard-stats">
            <div class="stat-card income-card">
                <div class="stat-icon">
                    <i class="ri-arrow-up-circle-line"></i>
                </div>
                <div class="stat-content">
                    <div class="stat-label">本月收入</div>
                    <div class="stat-value" id="monthlyIncome">¥0.00</div>
                    <div class="stat-trend positive"><i class="ri-arrow-up-line"></i> <span id="incomeChange">0%</span></div>
                </div>
            </div>
            <div class="stat-card expense-card">
                <div class="stat-icon">
                    <i class="ri-arrow-down-circle-line"></i>
                </div>
                <div class="stat-content">
                    <div class="stat-label">本月支出</div>
                    <div class="stat-value" id="monthlyExpense">¥0.00</div>
                    <div class="stat-trend negative"><i class="ri-arrow-down-line"></i> <span id="expenseChange">0%</span></div>
                </div>
            </div>
        </div>

        <div class="dashboard-summary">
            <div class="summary-card">
                <div class="summary-title">
                    <i class="ri-wallet-3-line"></i>
                    <span>收支概况</span>
                </div>
                <div class="summary-content">
                    <div class="summary-item">
                        <div class="summary-label">结余</div>
                        <div class="summary-value" id="monthlyBalance">¥0.00</div>
                    </div>
                    <div class="summary-item">
                        <div class="summary-label">预算使用</div>
                        <div class="summary-value" id="budgetUsage">0%</div>
                    </div>
                    <div class="summary-progress">
                        <div class="progress-bar">
                            <div class="progress-fill" id="progressFill"></div>
                        </div>
                        <div class="progress-labels">
                            <span>0%</span>
                            <span>50%</span>
                            <span>100%</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="chart-container">
            <div class="chart-card" id="trend-chart">
                <div class="chart-header">
                    <h3><i class="ri-line-chart-line"></i> 月度收支趋势</h3>
                    <div class="chart-actions">
                        <button class="chart-action-btn" id="trendMonthBtn">月</button>
                        <button class="chart-action-btn" id="trendWeekBtn">周</button>
                    </div>
                </div>
                <div class="chart-body">
                    <canvas id="trendChart"></canvas>
                </div>
            </div>
            
            <div class="chart-card" id="category-chart">
                <div class="chart-header">
                    <h3><i class="ri-pie-chart-line"></i> 支出分类分布</h3>
                    <div class="chart-actions">
                        <button class="chart-action-btn" id="categoryMoreBtn">更多</button>
                    </div>
                </div>
                <div class="chart-body">
                    <canvas id="categoryChart"></canvas>
                </div>
                <div class="category-legend" id="categoryLegend"></div>
            </div>
            
            <div class="chart-card" id="compare-chart">
                <div class="chart-header">
                    <h3><i class="ri-bar-chart-grouped-line"></i> 收支对比分析</h3>
                    <div class="chart-actions">
                        <button class="chart-action-btn" id="compareMonthBtn">月</button>
                        <button class="chart-action-btn" id="compareYearBtn">年</button>
                    </div>
                </div>
                <div class="chart-body">
                    <canvas id="compareChart"></canvas>
                </div>
            </div>
        </div>
        
        <div class="insight-section">
            <div class="section-title">
                <i class="ri-lightbulb-line"></i>
                <span>智能洞察</span>
            </div>
            <div class="insight-cards" id="insightCards">
                <div class="insight-card">
                    <div class="insight-icon"><i class="ri-restaurant-line"></i></div>
                    <div class="insight-content">
                        <div class="insight-title">餐饮支出</div>
                        <div class="insight-text">本月餐饮支出占比较上月<span class="highlight increase">增加5%</span></div>
                    </div>
                </div>
                <div class="insight-card">
                    <div class="insight-icon"><i class="ri-shopping-bag-line"></i></div>
                    <div class="insight-content">
                        <div class="insight-title">购物支出</div>
                        <div class="insight-text">本月购物支出较上月<span class="highlight decrease">减少12%</span></div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="bottom-spacer"></div>
    </div>
    
    <div id="bottom-nav">
        <a href="bill.html" class="nav-item">
            <i class="ri-bill-line"></i>
            <span>账单管理</span>
        </a>
        <a href="chat.html" class="nav-item">
            <i class="ri-robot-fill"></i>
            <span>AI记账</span>
        </a>
        <a href="data.html" class="nav-item active">
            <i class="ri-pie-chart-line"></i>
            <span>数据分析</span>
        </a>
    </div>
    
    <script src="js/chart.min.js"></script>
    <script type="module" src="js/data.js"></script>
</body>
</html>